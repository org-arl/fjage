

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &mdash; fjåge 1.3.3-SNAPSHOT documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.3.3-SNAPSHOT',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="fjåge 1.3.3-SNAPSHOT documentation" href="index.html" />
    <link rel="next" title="Agents and Behaviors" href="behaviors.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="behaviors.html" title="Agents and Behaviors"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">fjåge 1.3.3-SNAPSHOT documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#quick-start">Quick start</a></li>
<li><a class="reference internal" href="#for-a-unix-based-platform">For a UNIX based platform</a></li>
<li><a class="reference internal" href="#for-a-windows-machine">For a Windows machine</a></li>
<li><a class="reference internal" href="#hello-world-agent">Hello world agent</a></li>
<li><a class="reference internal" href="#packaging-agents">Packaging agents</a></li>
<li><a class="reference internal" href="#typical-bootup-for-groovy-applications">Typical bootup for Groovy applications</a></li>
<li><a class="reference internal" href="#bootup-for-java-applications">Bootup for Java applications</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="behaviors.html"
                        title="next chapter">Agents and Behaviors</a></p>
<div id="searchbox" style="overflow:hidden;">
<script>
  (function() {
    var cx = '006023374622006758365:siprl0efik0';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<h3>Search</h3>
<gcse:search></gcse:search>
</div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="quick-start">
<h2>Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p>We assume that you have Java Development Kit (JDK) 1.6 or higher installed. If you don&#8217;t have one, you&#8217;ll need to <a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">install</a> one. We also assume that you have network connectivity.</p>
</div>
<div class="section" id="for-a-unix-based-platform">
<h2>For a UNIX based platform<a class="headerlink" href="#for-a-unix-based-platform" title="Permalink to this headline">¶</a></h2>
<p>(Linux, Mac OS X or <a class="reference external" href="http://www.cygwin.com/">Cygwin</a> on Windows)</p>
<p>Create a new folder for your first fjåge project. Lets call it <cite>MyFjageProject</cite>. Open a terminal window in this folder and download the <a class="reference external" href="https://raw.github.com/org-arl/fjage/master/src/sphinx/fjage_quickstart.sh">fjage_quickstart.sh</a> script in that folder:</p>
<div class="highlight-sh"><div class="highlight"><pre>curl -O https://raw.github.com/org-arl/fjage/master/src/sphinx/fjage_quickstart.sh
</pre></div>
</div>
<p>To get your project ready, just run the script:</p>
<div class="highlight-sh"><div class="highlight"><pre>sh fjage_quickstart.sh
</pre></div>
</div>
<p>The script downloads all necessary libraries (jar files) and some template startup scripts to get you going. You may now delete off the <cite>fjage_quickstart.sh</cite> file, if you like:</p>
<div class="highlight-sh"><div class="highlight"><pre>rm fjage_quickstart.sh
</pre></div>
</div>
<p>Your directory structure should now look something like this:</p>
<pre class="literal-block">
fjage.sh
logs/
build/libs/
  fjage-1.3.3-SNAPSHOT.jar
  groovy-all-2.1.3.jar
  commons-lang3-3.1.jar
  jline-2.10.jar
etc/
  initrc.groovy
samples/
  01_hello.groovy
  02_ticker.groovy
  03_weatherRequest.groovy
  03_weatherStation.groovy
  04_weatherRequest.groovy
  04_weatherStation.groovy
  WeatherForecastReqMsg.groovy
</pre>
</div>
<div class="section" id="for-a-windows-machine">
<h2>For a Windows machine<a class="headerlink" href="#for-a-windows-machine" title="Permalink to this headline">¶</a></h2>
<p>Create a new folder for your first fjåge project. Lets call it <cite>MyFjageProject</cite>. Download the PowerShell script <a class="reference external" href="https://raw.github.com/org-arl/fjage/master/src/sphinx/fjage_quickstart.ps1">fjage_quickstart.ps1</a> to this folder. Now, open a command prompt at this folder and just run the script:</p>
<div class="highlight-sh"><div class="highlight"><pre>powershell fjage_quickstart.ps1
</pre></div>
</div>
<p>The script downloads all necessary libraries (jar files) and create some template startup scripts to get you going. You may now delete off the <cite>fjage_quickstart.ps1</cite> file, if you like.</p>
<p>Your directory structure should now look something like this:</p>
<pre class="literal-block">
fjage.bat
logs/
build/libs/
  fjage-1.3.3-SNAPSHOT.jar
  groovy-all-2.1.3.jar
  commons-lang3-3.1.jar
  jline-2.10.jar
etc/
  initrc.groovy
samples/
  01_hello.groovy
  02_ticker.groovy
  03_weatherRequest.groovy
  03_weatherStation.groovy
  04_weatherRequest.groovy
  04_weatherStation.groovy
  WeatherForecastReqMsg.groovy
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You may get an error message if the execution of scripts on your machine is not enabled. To resolve this, open a new command prompt with administrator privilage (On the start menu, point to the cmd.exe, right click and select the &#8216;Run as administrator&#8217; option) and type in the following command:</p>
<p class="last"><cite>Set-ExecutionPolicy RemoteSigned</cite></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <cite>build/libs</cite> folder contains all the necessary libraries. The <cite>etc</cite> folder contains startup files. The <cite>samples</cite> folder contains the example programs used in this documentation. <cite>initrc.groovy</cite> in the initialization script where you create your agents and configure them. <cite>fjage.sh</cite> or <cite>fjage.bat</cite> is your startup script that simply sets up the classpath and boots up fjåge with the <cite>initrc.groovy</cite> script. The organization of the directory structure and names of the files are all customizable by editing <cite>fjage.sh</cite> and <cite>initrc.groovy</cite>.</p>
</div>
<p>To check that your fjåge installation is correctly working, type <cite>./fjage.sh</cite> (or fjage.bat in command prompt). That should simply give you an interactive fjåge Groovy shell with a <cite>&gt;</cite> prompt. Type <cite>ps</cite> to see a list of running agents. There should be only one <cite>shell</cite> agent created by the default <cite>initrc.groovy</cite> script. Type <cite>shutdown</cite> or press control-D to terminate fjåge.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">bash$ ./fjage.sh</span>
<span class="gp">&gt;</span> ps
<span class="go">shell: org.arl.fjage.shell.ShellAgent - IDLE</span>
<span class="gp">&gt;</span> shutdown

<span class="go">bash$</span>
</pre></div>
</div>
</div>
<div class="section" id="hello-world-agent">
<h2>Hello world agent<a class="headerlink" href="#hello-world-agent" title="Permalink to this headline">¶</a></h2>
<p>As any good tutorial does, we start with the proverbial <em>hello world</em> agent. The agent isn&#8217;t going to do much, other than print the words &#8220;Hello world!!!&#8221; in the logs.</p>
<p>Create a file called <cite>hello.groovy</cite> in your project folder and put the following contents in it:</p>
<div class="highlight-groovy"><pre>import org.arl.fjage.*

class HelloWorldAgent extends Agent {
  void init() {
    add new OneShotBehavior({
      println 'Hello world!!!'
    })
  }
}

container.add 'hello', new HelloWorldAgent()</pre>
</div>
<p>This Groovy script creates an agent with <cite>AgentID</cite> <cite>hello</cite> of class <cite>HelloWorldAgent</cite>. The <cite>init()</cite> method of the agent is called once the agent is loaded. In this method, a one-shot behavior is added to the agent. One-shot behaviors are fired only once, as soon as possible; in our case, this is as soon as the agent is running. The one-shot behavior prints &#8220;Hello world!!!&#8221;. The output of the agent is not directly displayed on the console, but instead sent to the log file, as we will see shortly.</p>
<p>To run the agent, start fjåge and run the script by typing <cite>run &#8216;hello&#8217;</cite> or simply <cite>&lt;hello</cite> (the <em>less than</em> sign &#8216;&lt;&#8217; is a shortcut for <cite>run &#8216;...&#8217;</cite>). This will return you to the interactive shell prompt. To check that your agent is indeed running, type <cite>ps</cite>. You may then shutdown fjåge as before and check the log file for your output:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">bash$ ./fjage.sh</span>
<span class="gp">&gt;</span> &lt;hello
<span class="gp">&gt;</span> ps
<span class="go">hello: HelloWorldAgent - IDLE</span>
<span class="go">shell: org.arl.fjage.shell.ShellAgent - IDLE</span>
<span class="gp">&gt;</span> shutdown

<span class="go">bash$ cat logs/log-0.txt | grep HelloWorldAgent@</span>
<span class="go">1377443280802|INFO|HelloWorldAgent@18:println|Hello world!!!</span>
<span class="go">bash$</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>The code for the HelloWorldAgent is located in the samples directory. You can simply run it by typing:</p>
<p class="last"><cite>&lt;samples/01_hello</cite>.</p>
</div>
<p>The default fjåge log file format is pipe-separated, where the first column is the timestamp in milliseconds, the second column is the log level, the third column is the agent class name + threadID + method name, and the last column is the log message. You may change the format if you like by loading a custom logging configuration by specifying a <cite>java.util.logging.config.file</cite> system property while starting the JVM (see <a class="reference external" href="http://docs.oracle.com/javase/7/docs/technotes/guides/logging/overview.html">Java logging</a>).</p>
<p>Congratulations!!! You have just developed your first Groovy fjåge agent!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Stack traces for any exceptions caused by any agent will be dumped to the log file. This can be invaluable during debugging.</p>
</div>
</div>
<div class="section" id="packaging-agents">
<h2>Packaging agents<a class="headerlink" href="#packaging-agents" title="Permalink to this headline">¶</a></h2>
<p>The method shown above defined the agent class in a Groovy script that was executed from the interactive shell. If the Groovy script is modified, the agent can be reloaded by killing it and running the script again:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">bash$ ./fjage.sh</span>
<span class="gp">&gt;</span> &lt;hello
<span class="gp">&gt;</span> ps
<span class="go">hello: HelloWorldAgent - IDLE</span>
<span class="go">shell: org.arl.fjage.shell.ShellAgent - IDLE</span>
<span class="gp">&gt;</span> container.kill agent<span class="o">(</span><span class="s1">&#39;hello&#39;</span><span class="o">)</span>;
<span class="gp">&gt;</span> ps
<span class="go">shell: org.arl.fjage.shell.ShellAgent - IDLE</span>
<span class="gp">&gt;</span> &lt;hello
<span class="gp">&gt;</span> ps
<span class="go">hello: HelloWorldAgent - IDLE</span>
<span class="go">shell: org.arl.fjage.shell.ShellAgent - IDLE</span>
<span class="gp">&gt;</span>
</pre></div>
</div>
<p>This is useful for testing. However, in a production system, you usually want to define agents in their own files, compile them and package them into a jar on the classpath. To do this, you would create a source file <cite>HelloWorldAgent.groovy</cite> with the class definition:</p>
<div class="highlight-groovy"><pre>import org.arl.fjage.*

class HelloWorldAgent extends Agent {
  void init() {
    add new OneShotBehavior({
      println 'Hello world!!!'
    })
  }
}</pre>
</div>
<p>or <cite>HelloWorldAgent.java</cite> with the class definition:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">org.arl.fjage.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldAgent</span> <span class="kd">extends</span> <span class="n">Agent</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">add</span><span class="o">(</span><span class="k">new</span> <span class="n">OneShotBehavior</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">println</span><span class="o">(</span><span class="s">&quot;Hello world!!!&quot;</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">});</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>You would then compile it into a <cite>HelloWorldAgent.class</cite> file using the <cite>groovyc</cite> compiler (or <cite>javac</cite> compiler) and perhaps package it into a jar file. You would then put this jar file or the class file on the classpath.</p>
<p>The <cite>fjage.sh</cite> startup script includes all jar files from the <cite>build/libs</cite> folder into the classpath. So you could simply copy your jar file into the <cite>build/libs</cite> folder and then run <cite>fjage.sh</cite>. You can then load the agent on the interactive shell:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">bash$ ./fjage.sh</span>
<span class="gp">&gt;</span> ps
<span class="go">shell: org.arl.fjage.shell.ShellAgent - IDLE</span>
<span class="gp">&gt;</span> container.add <span class="s1">&#39;hello&#39;</span>, new HelloWorldAgent<span class="o">()</span>;
<span class="gp">&gt;</span> ps
<span class="go">hello: HelloWorldAgent - IDLE</span>
<span class="go">shell: org.arl.fjage.shell.ShellAgent - IDLE</span>
<span class="gp">&gt;</span>
</pre></div>
</div>
<p>If you wanted the agent to be automatically loaded, you can put the <cite>container.add &#8216;hello&#8217;, new HelloWorldAgent()</cite> statement in the <cite>initrc.groovy</cite> startup script.</p>
</div>
<div class="section" id="typical-bootup-for-groovy-applications">
<h2>Typical bootup for Groovy applications<a class="headerlink" href="#typical-bootup-for-groovy-applications" title="Permalink to this headline">¶</a></h2>
<p>In order to fully understand how fjåge works, it is useful to look at a slightly simplified version of the bootup sequence of our hello world fjåge application. When we run <cite>fjage.sh</cite>, the shell script creates a CLASSPATH to include all jar files in the <cite>build/libs</cite> folder and then starts the JVM:</p>
<div class="highlight-sh"><div class="highlight"><pre>java -cp <span class="s2">&quot;$CLASSPATH&quot;</span> org.arl.fjage.shell.GroovyBoot etc/initrc.groovy
</pre></div>
</div>
<p>This command invokes the <cite>main()</cite> static method on the <cite>org.arl.fjage.shell.GroovyBoot</cite> class. The initialization script <cite>etc/initrc.groovy</cite> is passed as a command line argument to the <cite>main()</cite>.</p>
<p>Let us next take a look at a simplified code extract from the <cite>org.arl.fjage.shell.GroovyBoot.main()</cite> method:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
  <span class="n">GroovyExtensions</span><span class="o">.</span><span class="na">enable</span><span class="o">();</span>
  <span class="n">engine</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GroovyScriptEngine</span><span class="o">();</span>
  <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="nl">a:</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">engine</span><span class="o">.</span><span class="na">exec</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">a</span><span class="o">),</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">engine</span><span class="o">.</span><span class="na">waitUntilCompletion</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="n">engine</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>GroovyBoot</cite> also supports resource URLs of the form <cite>res://path/to/package/script.groovy</cite> to execute initialization Groovy scripts loaded from Java resources (potentially inside jar files).</p>
</div>
<p>This code enables Groovy extensions in fjåge to add syntactic sugar for ease of writing Groovy agents, and then sequentially executes every initialization Groovy script given on the command line. In our case, this causes the <cite>etc/initrc.groovy</cite> to be executed:</p>
<div class="highlight-groovy"><pre>import org.arl.fjage.*
import org.arl.fjage.shell.*

platform = new RealTimePlatform()
container = new Container(platform)
shell = new ShellAgent(new ConsoleShell(), new GroovyScriptEngine())
container.add 'shell', shell
// add other agents to the container here
platform.start()</pre>
</div>
<p>The script imports the fjage packages. A real-time platform and a container is created, and a <cite>shell</cite> agent is configured and added to the container. The <cite>shell</cite> agent is set to provide the interactive shell on the console, and use Groovy for scripting. Finally, the platform is started. Now we have a fjåge container running with a single <cite>shell</cite> agent that provides an interactive shell on the console.</p>
<p>Any other agents that we may wish to start can be included in the <cite>etc/initrc.groovy</cite> script, just before starting the platform.</p>
</div>
<div class="section" id="bootup-for-java-applications">
<h2>Bootup for Java applications<a class="headerlink" href="#bootup-for-java-applications" title="Permalink to this headline">¶</a></h2>
<p>If you wanted a pure-Java project, you would forego the scripting ability (since that requires Groovy) and simply setup the platform and container directly from the <cite>main()</cite> program. For example:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">org.arl.fjage.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyProject</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">Platform</span> <span class="n">platform</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RealTimePlatform</span><span class="o">();</span>
    <span class="n">Container</span> <span class="n">container</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Container</span><span class="o">(</span><span class="n">platform</span><span class="o">);</span>
    <span class="c1">// add your agents to the container here</span>
    <span class="c1">// e.g. container.add(&quot;hello&quot;, new HelloWorldAgent());</span>
    <span class="n">platform</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>As simple as that!</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="behaviors.html" title="Agents and Behaviors"
             >next</a></li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             >previous</a> |</li>
        <li><a href="index.html">fjåge 1.3.3-SNAPSHOT documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Mandar Chitre.
    </div>
  </body>
</html>